---
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import About from "../components/About.astro";
import Projects from "../components/Projects.astro";
import Publications from "../components/Publications.astro";
import Experience from "../components/Experience.astro";
import Education from "../components/Education.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config";
import "../styles/global.css";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={siteConfig.description} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <title>{siteConfig.name} - {siteConfig.title}</title>
  </head>
  <body>
    <Header />
    <section>
      <Hero />
      <About />
      <Experience />
      <Projects />
      <Publications />
      <Education />
    </section>
    <div
      id="lightbox"
      class="fixed inset-0 z-50 hidden items-center justify-center bg-black/70 backdrop-blur-sm p-4"
      role="dialog"
      aria-modal="true"
    >
      <div class="relative max-w-5xl w-full">
        <button
          type="button"
          class="absolute -top-3 -right-3 bg-white text-gray-700 rounded-full shadow p-2 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white"
          aria-label="Close image"
          data-lightbox-close
        >
          Ã—
        </button>
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
          <img
            id="lightbox-img"
            src=""
            alt="Full image"
            class="w-full h-full object-contain max-h-[85vh] bg-black"
          />
        </div>
      </div>
    </div>

    <script>
      const lightbox = document.getElementById("lightbox");
      const lightboxImg = document.getElementById("lightbox-img");

      document.addEventListener("click", (event) => {
        const thumb = event.target.closest("[data-lightbox-img]");
        if (thumb) {
          event.preventDefault();
          const src = thumb.getAttribute("data-lightbox-img") || "";
          if (src && lightbox && lightboxImg) {
            lightboxImg.src = src;
            lightbox.classList.remove("hidden");
            lightbox.classList.add("flex");
          }
        }

        if (
          lightbox &&
          !lightbox.classList.contains("hidden") &&
          (event.target === lightbox || event.target.hasAttribute("data-lightbox-close"))
        ) {
          lightbox.classList.add("hidden");
          lightbox.classList.remove("flex");
          if (lightboxImg) {
            lightboxImg.src = "";
          }
        }
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && lightbox && !lightbox.classList.contains("hidden")) {
          lightbox.classList.add("hidden");
          lightbox.classList.remove("flex");
          if (lightboxImg) {
            lightboxImg.src = "";
          }
        }
      });
    </script>
    <Footer />
  </body>
</html>
